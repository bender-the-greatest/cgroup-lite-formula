# /etc/cgconfig.conf
{% set groups = pillar['cgroups'] %}

mount {{ "{" }}
  {% for key, val in groups.items() %}
  {{ val['name'] }} = {{ val['mountpoint'] }};
  {% endfor %}
{{ "}" }}

{% for group in groups.items() %}
group {{ group['name'] }} {{ "{" }}
  {% for key, val in group['rules'] %}
  {{ key }}="{{ val }}";
  {% endfor %}
{{ "}" }}
{% endfor %}
